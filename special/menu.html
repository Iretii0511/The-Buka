<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>All Food</title>
        <link rel="stylesheet" href="../css/bootstrap.min.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="../css/styles.css">
</head>
<body>

    <style>
        nav{
            margin-bottom: 20px;
        }
    </style>
    <nav class="navbar navbar-expand-sm navbar-light bg-light">
        <a href="#" class="navbar-brand"><img src="logo.png" alt="#"></a>
        <button class="navbar-toggler" data-toggle="collapse" data-target="#menu"><span class="navbar-toggler-icon"></span></button>
        <div class="collapse navbar-collapse" id="menu">
            <ul class="navbar-nav">
                <li class="nav=item">
                    <a href="#" class="nav-link active">Home</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">About</a>
                </li>
                <li class="nav-item">
                    <a href="forms/contactus.html" class="nav-link">Contact</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Menu</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Place an Order</a>
                </li>

            </ul>
            <form class="form-inline my-2 my-lg-0 ml-auto">
                <input class="form-control mr-sm-2" type="search" placeholder="Search for food" aria-label="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
            <ul class="navbar-nav ml-auto signin-signout">
                <li class="nav=item">
                    <a href="forms/signup.html" class="nav-link">Sign Up</a>
                </li>
                <li class="nav-item">
                    <a href="forms/signin.html" class="nav-link">Sign In</a>
                </li>
            </ul>
        </div>

    </nav>
    <div class="container">
        <div class="jumbotron">
            <h1>Available Food</h1>
        </div>
        <div class="row" id="display">
            
        </div>
    </div>
   
    
        
    <script src="../jquery.js"></script>
        <script>
            $(document).ready(function(){
                
           
            $.ajax({
                     url:"http://localhost:3000/food",
                     success:function(result){
                         if(result.length){
                           let output = $("#display");
                           //console.log(result)
                           result.forEach(food=>{
                              
                               output.append(`<div class="col-lg-3 col-md-6">
                                                <div class="card">
                                                    <p class="table-head">
                                                        ${food.id}
                                                    </p>
                                                    <img class="card-img-top" src=${food.url} alt="">
                                                    <div class="card-body">
                                                        <ul class="card-text"><li>${food.foodName}</li>
                                                        <li>${food.foodPrice}</li>
                                                        <li>${food.origin}</li></ul>
                                                    </div>
                                                </div>
                                            </div>`);
                                      
                                       
                           })
                           }
                           
                        },
                        method: 'GET'
                           
                    })
                           
                
                        //    //add delete function to my delete button
                        //    $('.del').on('click',function(e){
                        //        //console.log(e.target.dataset.id)
                        //        //confirm before deleting
                        //        if(confirm("Sure you want to delete food?")){
                        //         $.ajax({
                        //     url:"http://localhost:3000/food/"+e.target.dataset.id,success:function(result){
                        //         // console.log(result)
                               
                        //     },
                        //     method:"DELETE",
                        //       });
                        //        }
                               
                        //    })

                           //lets listen to edit buttton click
                //            $('.edit').on('click',function(e){
                //                e.preventDefault();
                //                let id;
                //                let name;
                //                let origin;
                //                let price;
                //                let imgUrl;
                //                if(confirm("You are about to edit a food information")){
                //                 $.ajax({
                //             url:"http://localhost:3000/food/"+e.target.dataset.id,
                //             success:function(result){
                //                  console.log(result);
                                 
                //                  if(result){
                //                     // alert('hi')
                //                     id=result.id;
                //                     name=result.name;
                //                     origin=result.origin;
                //                     price=result.price;
                //                     imgUrl=result.imgUrl;

                //                 //populate modal form with values from database
                //                 $('#foodId').val(`${id}`);
                //                $('#foodName').val(`${name}`);
                //                $('#foodOrigin').val(`${origin}`);
                //                $('#foodPrice').val(`${price}`);
                //                $('#foodImg').val(`${imgUrl}`);
                //                 }
                //             },
                //             method:"GET",
                //               });
                //                }

                //            })
                //          }
                         
                //      },
                //      method:"GET"
                //  });
                //  //listen to click on update modal form 
                //  $('.update').on('click',function(e){
                //      e.preventDefault();
                //     // alert("hello!")
                //         let id = $('#foodId').val();
                //         let name= $('#foodName').val();
                //         let origin = $('#foodOrigin').val();
                //         let price = $('#foodPrice').val();
                //         let imgUrl = $('#foodImg').val();
                //         $.ajax({
                //     url:"http://localhost:3000/food/"+id,success:function(result){
                //         console.log(result)
                //         },
                //     method:"PUT",
                //     data:{
                //         id,
                //         name,
                //         origin,
                //         price,
                //         imgUrl
                //     },
                // });
                //  })
                 });
        </script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/9d86de223e.js" crossorigin="anonymous"></script>
</body>
</html>